{"version":3,"sources":["modules/handleModal.js","modules/handleResizing.js","plugin.js"],"names":["handleModal","btnModal","mainModal","mainModalReject","trigger","modal","rejectTrigger","acceptTrigger","closeModal","getElementsByClassName","mainModalAccept","classList","remove","document","getElementsByTagName","style","overflow","addEventListener","e","target","preventDefault","contains","add","url","querySelectorAll","length","fileref","createElement","src","body","appendChild","scriptExists","handleResizing","resizer","currentResizer","modalWindow","mousedown","prevX","clientX","prevY","clientY","mousemove","rect","getBoundingClientRect","width","height","window","mouseup","removeEventListener","pluginScript","getElementById","isRunning","getAttribute","link","rel","href","head","innerHTML"],"mappings":";AAiDeA,aAAAA,OAAAA,eAAAA,QAAAA,aAAAA,CAAAA,OAAAA,IAAAA,QAAAA,aAAAA,EAjDf,IAAMA,EAAc,SAACC,EAAUC,GACvBC,IAOaC,EAASC,EAAOC,EAAeC,EAC1CC,EARFL,EAAkBD,EAAUO,uBAAuB,qBAAqB,GACxEC,EAAkBR,EAAUO,uBAAuB,oBAAoB,GAMjDJ,EAsCRH,EAtCeI,EAsCJH,EAtCmBI,EAsCFG,EArCxCF,EAAa,WACjBH,EAAMM,UAAUC,OAAO,oBACvBC,SAASC,qBAAqB,QAAQ,GAAGC,MAAMC,SAAW,GAC1DZ,EAAQO,UAAUC,OAAO,wBAJVR,EAsCTH,GAzBAgB,iBAAiB,QAAS,SAACC,GAC7BA,EAAEC,QACJD,EAAEE,iBAGAf,EAAMM,UAAUU,SAAS,oBAC3Bb,KAXFH,EAAMM,UAAUW,IAAI,oBACpBT,SAASC,qBAAqB,QAAQ,GAAGC,MAAMC,SAAW,SAC1DZ,EAAQO,UAAUW,IAAI,yBAexBhB,EAAcW,iBAAiB,QAAS,WAAMT,OAAAA,MAE9CD,EAAcU,iBAAiB,QAAS,WAGlC,GAFJT,IAhCkBe,EAkCA,iBAjCbV,SAASW,iBAAgCD,eAAAA,OAAAA,EAASE,OAAAA,OAAS,GAiC7B,CAC3BC,IAAAA,EAAUb,SAASc,cAAc,UACvCD,EAAQE,IAAM,eACdf,SAASgB,KAAKC,YAAYJ,GArCvBK,IAAaR,KA6CTvB,EAAAA,EAAAA,QAAAA,QAAAA;;AChBAgC,aAAAA,OAAAA,eAAAA,QAAAA,aAAAA,CAAAA,OAAAA,IAAAA,QAAAA,aAAAA,EAjCf,IAAMA,EAAiB,WACfC,IAEFC,EAFED,EAAUpB,SAASJ,uBAAuB,WAAW,GACrD0B,EAActB,SAASJ,uBAAuB,uBAAuB,GA4B3EwB,EAAQhB,iBAAiB,YAzBhBmB,SAAUlB,GACjBgB,EAAiBhB,EAAEC,OACfkB,IAAAA,EAAQnB,EAAEoB,QACVC,EAAQrB,EAAEsB,QAELC,SAAAA,IACDC,IAAAA,EAAOP,EAAYQ,wBAErBT,EAAevB,UAAUU,SAAS,QACpCc,EAAYpB,MAAM6B,MAAQF,EAAKE,OAASP,EAAQnB,EAAEoB,SAAW,KAC7DH,EAAYpB,MAAM8B,OAASH,EAAKG,QAAUN,EAAQrB,EAAEsB,SAAW,MAGjEH,EAAQnB,EAAEoB,QACVC,EAAQrB,EAAEsB,QAOZM,OAAO7B,iBAAiB,YAAawB,GACrCK,OAAO7B,iBAAiB,UALf8B,WACPD,OAAOE,oBAAoB,YAAaP,QAU/BT,EAAAA,EAAAA,QAAAA,QAAAA;;ACDd,aAhCD,IAAA,EAAA,EAAA,QAAA,0BACA,EAAA,EAAA,QAAA,6BA+BC,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GA7BD,IAAMiB,EAAepC,SAASqC,eAAe,iBACvCC,EAAYF,EAAaG,aAAa,aAGtCC,EAAOxC,SAASc,cAAc,QAKpC,GAJA0B,EAAKC,IAAM,aACXD,EAAKE,KAAO,cACZ1C,SAAS2C,KAAK1B,YAAYuB,GAER,SAAdF,EAAsB,CAClBlD,IAAAA,EAAWY,SAASc,cAAc,UACxC1B,EAASU,UAAUW,IAAI,aACvBT,SAASgB,KAAKC,YAAY7B,GAGpBC,IAAAA,EAAYW,SAASc,cAAc,OACzCzB,EAAUS,UAAUW,IAAI,cACxBpB,EAAUuD,UAAV,oPAQA5C,SAASgB,KAAKC,YAAY5B,IAEdD,EAAAA,EAAAA,SAAAA,EAAUC,IACtB,EAAA,EAAA","file":"plugin.1015fed4.js","sourceRoot":"../src","sourcesContent":["const handleModal = (btnModal, mainModal) => {\n  const mainModalReject = mainModal.getElementsByClassName('main-modal__close')[0];\n  const mainModalAccept = mainModal.getElementsByClassName('main-modal__open')[0];\n\n  function scriptExists(url) {\n    return document.querySelectorAll(`script[src='${url}']`).length > 0;\n  }\n\n  function bindModal(trigger, modal, rejectTrigger, acceptTrigger) {\n    const closeModal = () => {\n      modal.classList.remove('main-modal--open');\n      document.getElementsByTagName('html')[0].style.overflow = '';\n      trigger.classList.remove('btn-modal--pressed');\n    };\n\n    const openModal = () => {\n      modal.classList.add('main-modal--open');\n      document.getElementsByTagName('html')[0].style.overflow = 'hidden';\n      trigger.classList.add('btn-modal--pressed');\n    };\n\n    trigger.addEventListener('click', (e) => {\n      if (e.target) {\n        e.preventDefault();\n      }\n\n      if (modal.classList.contains('main-modal--open')) {\n        closeModal();\n      } else {\n        openModal();\n      }\n    });\n\n    rejectTrigger.addEventListener('click', () => closeModal());\n\n    acceptTrigger.addEventListener('click', () => {\n      closeModal();\n\n      if (!scriptExists('./collect.js')) {\n        const fileref = document.createElement('script');\n        fileref.src = './collect.js';\n        document.body.appendChild(fileref);\n      }\n    });\n  }\n\n  bindModal(btnModal, mainModal, mainModalReject, mainModalAccept);\n};\n\nexport default handleModal;\n","const handleResizing = () => {\n  const resizer = document.getElementsByClassName('resizer')[0];\n  const modalWindow = document.getElementsByClassName('main-modal__control')[0];\n  let currentResizer;\n\n  function mousedown(e) {\n    currentResizer = e.target;\n    let prevX = e.clientX;\n    let prevY = e.clientY;\n\n    function mousemove() {\n      const rect = modalWindow.getBoundingClientRect();\n\n      if (currentResizer.classList.contains('se')) {\n        modalWindow.style.width = rect.width - (prevX - e.clientX) + 'px';\n        modalWindow.style.height = rect.height - (prevY - e.clientY) + 'px';\n      }\n\n      prevX = e.clientX;\n      prevY = e.clientY;\n    }\n\n    function mouseup() {\n      window.removeEventListener('mousemove', mousemove);\n    }\n\n    window.addEventListener('mousemove', mousemove);\n    window.addEventListener('mouseup', mouseup);\n  }\n\n  resizer.addEventListener('mousedown', mousedown);\n};\n\nexport default handleResizing;\n","import handleModal from './modules/handleModal';\nimport handleResizing from './modules/handleResizing';\n\nconst pluginScript = document.getElementById('idward-plugin');\nconst isRunning = pluginScript.getAttribute('isRunning');\n\n// // Add style.scsss to html file\nconst link = document.createElement('link');\nlink.rel = 'stylesheet';\nlink.href = './style.css';\ndocument.head.appendChild(link);\n\nif (isRunning === 'true') {\n  const btnModal = document.createElement('button');\n  btnModal.classList.add('btn-modal');\n  document.body.appendChild(btnModal);\n\n  // creating modal window\n  const mainModal = document.createElement('div');\n  mainModal.classList.add('main-modal');\n  mainModal.innerHTML = `\n    <div class=\"main-modal__control\">\n      <div class=\"resizer se\">&#8690;</div>\n      <button type=\"button\" class=\"main-modal__open\">Accept</button>\n      <button type=\"button\" class=\"main-modal__close\">Reject</button>\n    </div>\n  `;\n\n  document.body.appendChild(mainModal);\n\n  handleModal(btnModal, mainModal);\n  handleResizing();\n}\n"]}